---
id: decompounding-npl
title: German Decompounding
sidebar_label: Decompounder - Good Examples
custom_edit_url: null
---

import useBaseUrl from '@docusaurus/useBaseUrl'
import styles from '../doc.css';

**Examples why Decomposition works better than the Standard German Analyzer**

To compare the approaches with the **Standard German Analyzer**, the **Dictionary Decompounder** and the **Hyphenation Decompounder** we chose one query, that as an example.

*Example Query 23:* "BEOBACHTUNGEN DER SONNE WÄHREND FINSTERNISSEN, DIE DIE VERTEILUNG DER QUELLEN AUF DER SCHEIBE IM MIKROWELLENBEREICH ERGEBEN"

There are **20 relevant documents** for this query and the top 20 results are returned.
These are the true positives, false positives and false negatives distributions in comparison for each approach:

<img
  alt=""
  src={useBaseUrl('img/EXP3_npl_decomposition_tp_fp_fn.png')}
  class= "contents"
/>

As an example document to compare the scores and searched terms in detail we chose the document `81` because the **Hyphenation Decompounder** scored it rightfully as top document.

## German Analyzer vs. Hyphenation Decompounder

First of we compared the **Standard German Analyzer** with the **Hyphenation Decompounder**. 
Below you can compare how many of the tp, fn and fp are overlapping:

|                                |          | true positives | false positives | false negatives |
|--------------------------------|----------|----------------|-----------------|-----------------|
| **German Analyzer**            | total    |     2          | 18              | 18              |
|                                | disjoint |     0          | 13              | 5               |
| **Hyphenation Decompounder**  | total    |     7          | 13              | 13              |
|                                | disjoint |     5          | 8               | 0               |

When we try to explain why the **German Analyzer** works better than the **Hyphenation Decompounder** we have to look at the search results in detail.

**German Analyzer**
"position": out of k, "score": 3.3543134
```json
{
        "_id" : "81",
        "_score" : 3.3543134,
        "_source" : {
          "text_german" : "finsternisbeobachtungen von mikrowellenradioquellen auf der sonnenscheibe im april ergebnisse von beobachtungen der flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im bereich"
        },
        "highlight" : {
          "text_german" : [
            "finsternisbeobachtungen von mikrowellenradioquellen auf der sonnenscheibe im april ergebnisse von <em>beobachtungen</em>"
          ]
        }
```


**Hyphenation Decompounder**
"position": 0, "score": 28.156767
```json
{
  "doc": {
    "id": 81,
    "text_german": "finsternisbeobachtungen von mikrowellenradioquellen auf der sonnenscheibe im april ergebnisse von beobachtungen der flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im bereich"
  },
  "highlight": {
    "text_german": [
      "<em>finsternisbeobachtungen</em> von <em>mikrowellenradioquellen</em> auf der <em>sonnenscheibe</em> im april ergebnisse von <em>beobachtungen</em>",
      "flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im <em>bereich</em>"
    ]
  }
}
```

As we can see in this table the searched terms and therefore the scores diverge widely:


<img
  alt=""
  src={useBaseUrl('img/EXP3_npl_hyph_anal_terms.png')}
  class= "contents"
/>


Here you can find a list of all the searched terms for each approach and their frequencies per document as well as in how many documents they were found:

| **German Analyzer** |              |                |            |                 **Hyphenation Decompounder**                |              |                |            |
|-------------------|--------------|----------------|------------|:---------------------------------------------------------:|--------------|----------------|------------|
|                   | term   score | term   per doc | doc   freq |                                                           | term   score | term   per doc | doc   freq |
| "beobachtung"     | 3,35         | 1              | 640        | "beobachtung"                                             | 3,77         | 1              | 688        |
| -                 | -            | -              | -          | "sonn"                                                    | 3,71         | 1              | 721        |
| -                 | -            | -              | -          | "finsternis","finsterniss"                                | 6,53         | 1              | 88         |
| -                 | -            | -              | -          | "quell"                                                   | 4,51         | 1              | 398        |
| -                 | -            | -              | -          | "scheib"                                                  | 6,08         | 1              | 123        |
| -                 | -            | -              | -          | "bereich","mikro",   "mikrowellenbereich", "reich","well" | 3,55         | 4              | 1759       |

*Example Query 23:* "BEOBACHTUNGEN DER SONNE WÄHREND FINSTERNISSEN, DIE DIE VERTEILUNG DER QUELLEN AUF DER SCHEIBE IM MIKROWELLENBEREICH ERGEBEN"

Text highlighted with *Standard German Analyzer*:<br></br>
    "finsternisbeobachtungen von mikrowellenradioquellen auf der sonnenscheibe im april ergebnisse von <em>`beobachtungen`</em>"

Text highlighted with *Hyphenation Decompounder*:<br></br>
      "<em>`finsternisbeobachtungen`</em> von <em>`mikrowellenradioquellen`</em> auf der <em>`sonnenscheibe`</em> im april ergebnisse von <em>`beobachtungen`</em>"<br></br>
      "flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im <em>`bereich`</em>"

We can clearly see that the term `FINSTERNISSEN` doesn't match within the document while using the **German Analyzer**. It gets stemmed by Elasticsearch to the term `finsternis` but since the searched text isn't decompounded with this approach, it won't return `finsternisbeobachtungen` as relevant for the query. Same goes for the term `MIKROWELLENBEREICH` which is only found by the **Hyphenation Decompounder** within the composition `mikrowellenradioquellen`.

The **Standard German Analyzer** seems to find way less than the **Hyphenation Decompounder**. Even though some of the terms the **Hyphenation** approach extracts are quite unusefull for this query, like `well` and `reich`, it still finds enough relevant terms that weren't found by only using the standard approach.

This shows that the **Decompounder** approach does improve the search results.

## Dictionary Decompounder vs. Hyphenation Decompounder

Second we compared the **Dictionary Decompounder** with the **Hyphenation Decompounder** to see how much the improvement between a dictionary and a hyphenation approach weights. 
Below you can compare how many of the true positives, false negatives and false positives are overlapping between the two approaches:

|                     |          | true positives | false positives | false negatives |
|---------------------|----------|----------------|-----------------|-----------------|
| **Dictionary Decompounder** | total    |     2          | 18              | 18              |
|                     | disjoint |     0          | 12              | 6               |
| **Hyphenation Decompounder**   | total    |     8          | 12              | 12              |
|                     | disjoint |     6          | 6               | 0               |

Once again it is helpful to look at one relevant document from the query more closely. The document with the id `81`, which we chose as a an example, does get ranked very high on both approaches. But it's only on the second position with the **dictionary** approach and on the top position with the **hyphenation** approach. 

**Dictionary Decompounder**
"position": 1, "score": 27.676197
```json
{
  "doc": {
    "id": 81,
    "text_german": "finsternisbeobachtungen von mikrowellenradioquellen auf der sonnenscheibe im april ergebnisse von beobachtungen der flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im bereich"
  },
  "highlight": {
    "text_german": [
      "<em>finsternisbeobachtungen</em> von <em>mikrowellenradioquellen</em> auf der <em>sonnenscheibe</em> im april ergebnisse von <em>beobachtungen</em>",
      "der flussdichtepolarisation und <em>helligkeitsverteilung</em>, die in japan <em>gemacht</em> wurden, sind vier frequenzen",
      "im <em>bereich</em>"
    ]
  }
```

**Hyphenation Decompounder**
"position": 0, "score": 28.156767
```json
{
  "doc": {
    "id": 81,
    "text_german": "finsternisbeobachtungen von mikrowellenradioquellen auf der sonnenscheibe im april ergebnisse von beobachtungen der flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im bereich"
  },
  "highlight": {
    "text_german": [
      "<em>finsternisbeobachtungen</em> von <em>mikrowellenradioquellen</em> auf der <em>sonnenscheibe</em> im april ergebnisse von <em>beobachtungen</em>",
      "flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im <em>bereich</em>"
    ]
  }
}
```

To analyze why this document is rated slightly different, we have to look at the searched terms once again:

<img
  alt=""
  src={useBaseUrl('img/EXP3_npl_hyph_dict_terms.png')}
  class= "contents"
/>

Here you can find a list of all the searched terms for each approach and their frequencies per document as well as in how many documents they were found:

|                           **Dictionary Decompounder**                          |              |                     |  |  **Hyphenation Decompounder**                                                         |              |                     |            |
|:----------------------------------------------------------------------------:|--------------|---------------------|:--------------------------:|-----------------------------------------------------------|--------------|---------------------|------------|
|                                                                              | term   score | term per doc | doc   freq                 |                                                           | term   score | term per doc | doc   freq |
| "beobachtung",   "acht", "bach"                                              | 3,29         | 6                   | 2217                       | "beobachtung"                                             | 3,77         | 1                   | 688        |
| "sonn"                                                                       | 3,84         | 1                   | 721                        | "sonn"                                                    | 3,71         | 1                   | 721        |
| "finsternis",   "finsterniss", "stern"                                       | 6,9          | 2                   | 198                        | "finsternis","finsterniss"                                | 6,53         | 1                   | 88         |
| "teil",   "verteilung"                                                       | 2,65         | 1                   | 1679                       | -                                                         | -            | -                   | -          |
| "quell",   "ell"                                                             | 2,09         | 2                   | 3352                       | "quell"                                                   | 4,51         | 1                   | 398        |
| "scheib",   "eib"                                                            | 6,57         | 2                   | 241                        | "scheib"                                                  | 6,08         | 1                   | 123        |
| "bereich",   "eich", "ell", "mikro",   "mikrowellenbereich", "reich", "well" | 2,33         | 6                   | 3568                       | "bereich","mikro",   "mikrowellenbereich", "reich","well" | 3,55         | 4                   | 1759       |


*Example Query 23:* "BEOBACHTUNGEN DER SONNE WÄHREND FINSTERNISSEN, DIE DIE VERTEILUNG DER QUELLEN AUF DER SCHEIBE IM MIKROWELLENBEREICH ERGEBEN"

Text highlighted with *Dictionary Decompounder*:<br></br>
      "<em>`finsternisbeobachtungen`</em> von <em>`mikrowellenradioquellen`</em> auf der <em>`sonnenscheibe`</em> im april ergebnisse von <em>beobachtungen</em>"<br></br>
      "der flussdichtepolarisation und <em>`helligkeitsverteilung`</em>, die in japan <em>`gemacht`</em> wurden, sind vier frequenzen"<br></br>
      "im <em>`bereich`</em>"

Text highlighted with *Hyphenation Decompounder*:<br></br>
      "<em>`finsternisbeobachtungen`</em> von <em>`mikrowellenradioquellen`</em> auf der <em>`sonnenscheibe`</em> im april ergebnisse von <em>`beobachtungen`</em>"<br></br>
      "flussdichtepolarisation und helligkeitsverteilung, die in japan gemacht wurden, sind vier frequenzen im <em>`bereich`</em>"

This example shows that the **Dictionary Decompounder** extracts significantly more search terms within a term group from the query than the **Hyphenation Decompounder**. However, this depresses the tf-idf value, which is included in the calculation of the total term score, because with more documents found the term loses relevance.

The **Hyphenation Decompounder** searches for subwords within the query terms according to certain patterns. If these subwords are not considered relevant because they do not appear in a specified word list, they are not searched for. 

This can be seen especially with the word group `quell`. The **Dictionary Decompounder** additionally includes `ell`, which brings the score to `2.09`. The **Hyphenation Decompounder** has excluded the term `ell` and thus achieves a higher score of `4.51`.

So we can see that more search terms don't necessarily lead to better results, wherefore the **Hyphenation Decompounder** does improve the results of the **Dictionary Decompounder**.
