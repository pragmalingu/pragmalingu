(self.webpackChunkpragmalingu_github_io=self.webpackChunkpragmalingu_github_io||[]).push([[271],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return h}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(n),h=a,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||r;return n?o.createElement(m,s(s({ref:t},u),{},{components:n})):o.createElement(m,s({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var c=2;c<r;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},349:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return i},toc:function(){return l},default:function(){return u}});var o=n(2122),a=n(9756),r=(n(7294),n(3905)),s={id:"notebooks",title:"Working with Notebooks",sidebar_label:"Working with Notebooks",custom_edit_url:null},i={unversionedId:"guides/notebooks",id:"guides/notebooks",isDocsHomePage:!1,title:"Working with Notebooks",description:"1. Google Colab",source:"@site/docs/guides/notebooks.mdx",sourceDirName:"guides",slug:"/guides/notebooks",permalink:"/docs/guides/notebooks",editUrl:null,version:"current",sidebar_label:"Working with Notebooks",frontMatter:{id:"notebooks",title:"Working with Notebooks",sidebar_label:"Working with Notebooks",custom_edit_url:null},sidebar:"guides",previous:{title:"How to set up an Elasticsearch Instance",permalink:"/docs/guides/elastic-setup"},next:{title:"How to Use the Elasticsearch Ranking Evaluation API",permalink:"/docs/guides/ranking-api"}},l=[{value:"1. Google Colab",id:"1-google-colab",children:[]},{value:"2. Cells",id:"2-cells",children:[]},{value:"3. Install packages",id:"3-install-packages",children:[]},{value:"4. Get Data",id:"4-get-data",children:[]},{value:"5. Setup Elasticsearch instance",id:"5-setup-elasticsearch-instance",children:[{value:"6. Summary",id:"6-summary",children:[]}]}],c={toc:l};function u(e){var t=e.components,n=(0,a.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"1-google-colab"},"1. Google Colab"),(0,r.kt)("p",null,"Notebooks can be a useful tool in many areas. In our case, we use them primarily for evaluating data sets on Elasticsearch. Since Python is currently the best option for working with NLP, we chose a Python Notebook option. "),(0,r.kt)("details",null,(0,r.kt)("summary",null,'Why use a "Notebook"?'),(0,r.kt)("p",null,"A Notebook is an easy way to combine runnable code, text, mathematical equations, tables, and many other helpful visualizations.\nWorking with a Notebook makes it easier to understand code and display additional information in one document.\nWith the possibility of running it bit by bit, debugging is easier and clearer for others to understand.")),(0,r.kt)("p",null,"Compiling and running code is always a RAM intensive process, therefore it is useful to have code presented line-by-line, and Notebooks are ideal for such a task.\nDepending on what you want to accomplish, and how much memory you have, there are two excellent options:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://colab.research.google.com/notebooks/intro.ipynb"},"Google Colab")," and ",(0,r.kt)("a",{parentName:"p",href:"https://jupyter.org/"},"Jupyter Notebooks")),(0,r.kt)("p",null,"Both are similarly structured, but there are small differences in how they handle data. For our use cases we chose Google Colab."),(0,r.kt)("p",null,"To get started with a Google Colab Notebook, all you need is your browser. If you use the Notebook with a Google Drive account the Notebook will save automatically, otherwise, you will have to save changes manually; for example as a commit in Github. Information on that can be found ",(0,r.kt)("a",{parentName:"p",href:"https://colab.research.google.com/github/googlecolab/colabtools/blob/master/notebooks/colab-github-demo.ipynb"},"in this notebook"),"."),(0,r.kt)("p",null,"For further information check out the ",(0,r.kt)("a",{parentName:"p",href:"https://colab.research.google.com/notebooks/intro.ipynb"},"Google Colab help notebooks"),"."),(0,r.kt)("h2",{id:"2-cells"},"2. Cells"),(0,r.kt)("p",null,"A notebook consists of several parts referred to as \u201ccells\u201d. These can be in either text or code format. Text formatted cells are useful for holding information and structuring the notebook. Text is formatted in markdown so that you can use headlines to create a table of contents which is then displayed on the left."),(0,r.kt)("p",null,"Cells containing code are compatible with several programming languages and require the same syntax as the language used. For Python, you have to import libraries the same way you normally would. A cell only responds with an output;either a printed command or an error. Otherwise, everything went smoothly and you will not receive any feedback."),(0,r.kt)("p",null,"The cells can be moved within the notebook at any time, but you should keep in mind that some cells are dependent on others regarding variables or imports. Basically, you can execute the cells, and thus the code snippets, in any order so long as you keep track of dependencies."),(0,r.kt)("h2",{id:"3-install-packages"},"3. Install packages"),(0,r.kt)("p",null,"Since Google Colab is hosted on Google's servers you have to install the necessary packages and download data every time you reconnect the notebook."),(0,r.kt)("p",null,"To install packages that aren't already installed on the Colab server, for example the Python package for Elasticsearch, simply run ",(0,r.kt)("inlineCode",{parentName:"p"},"!pip")," followed by the package you want to install:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"!pip install Elasticsearch -q\n")),(0,r.kt)("h2",{id:"4-get-data"},"4. Get Data"),(0,r.kt)("p",null,"As already mentioned, data must also be downloaded again with each new connection. Download and other commands follow the same syntax as using your terminal on Linux. You can find the downloaded files on the left when you click on the folder sign.\nThe files can be referenced like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"!wget http://ir.dcs.gla.ac.uk/resources/test_collections/cran/cran.tar.gz\n!tar -xf cran.tar.gz\n\nPATH_TO_CRAN_TXT = '/content/cran.all.1400'\n")),(0,r.kt)("h2",{id:"5-setup-elasticsearch-instance"},"5. Setup Elasticsearch instance"),(0,r.kt)("p",null,"IIf you don't want to host Elasticsearch on your own server, it is also possible to  initialize Elasticsearch in Google Colab.\nTo do this, it is first necessary to download Elasticsearch:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# download elasticsearch\n!wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.9.1-linux-x86_64.tar.gz -q\n!tar -xzf elasticsearch-7.9.1-linux-x86_64.tar.gz\n!chown -R daemon:daemon elasticsearch-7.9.1\n")),(0,r.kt)("p",null,"Then you can start an Elasticsearch server and set up an instance:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# start server\nimport os\nfrom subprocess import Popen, PIPE, STDOUT\nes_server = Popen(['elasticsearch-7.9.1/bin/elasticsearch'], \n                  stdout=PIPE, stderr=STDOUT,\n                  preexec_fn=lambda: os.setuid(1)\n                 )\n# wait a bit then test\n!curl -X GET \"localhost:9200/\"\n\n# client-side\n!pip install elasticsearch -q\nfrom elasticsearch import Elasticsearch\nfrom datetime import datetime\nes = Elasticsearch()\nes.ping()  # got True\n")),(0,r.kt)("p",null,"You can check whether everything worked with a short example search request. To do this we create an index, add a document, and search it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"doc = {\n    'author': 'kimchy',\n    'text': 'Elasticsearch: cool. bonsai cool.',\n    'timestamp': datetime.now(),\n}\nres = es.index(index=\"test-index\", id=1, body=doc)\n\nresponse = es.cat.indices()\nprint(response)\n\nres = es.get(index=\"test-index\", id=1)\nprint(res['_source'])\n\nes.indices.refresh(index=\"test-index\")\n\nres = es.search(index=\"test-index\", body={\"query\": {\"match_all\": {}}})\n")),(0,r.kt)("p",null,"Our ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/elastic-setup"},"Elasticsearch Setup Guide")," provides more details on how to set up Elasticsearch on your own server."),(0,r.kt)("h3",{id:"6-summary"},"6. Summary"),(0,r.kt)("p",null,"Now that you know how to download data, get a local Elasticsearch instance running, and how you can work in Google Colab, you can start experimenting on your own. Next, check out our ",(0,r.kt)("a",{parentName:"p",href:"/docs/experiments/experiment1"},"First Experiment"),"."),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Acknowledgements:"),(0,r.kt)("br",null),"\nThanks to Kenny Hall for proofreading this article."),(0,r.kt)("div",{className:"col text--right"},(0,r.kt)("em",null,(0,r.kt)("small",null,"Written by ",(0,r.kt)("strong",null,"Miriam Rupprecht"),",  Oktober 2020"))))}u.isMDXComponent=!0}}]);